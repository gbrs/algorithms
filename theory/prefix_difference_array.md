Идеи обобщаются и на случай n-мерного прямоугольника.  

## Префиксный массив
Тракт, на котором расположены деревни. Даны расстояния между соседними деревнями. 
Надо быстро отвечать на кучу вопросов типа: какое расстоянии от деревни 136-й до 1289-й?  
Создаем массив префиксных сумм: как расстояния на километровых столбиках, 
т.е. сумма всех расстояний слева. pref_lst[0] = 0.  
Теперь за O(1) сможем отвечать на вопросы просто отнимая pref_lst[1289] - pref_lst[136 - 1]. 

### Префиксный массив 2d
Дана таблица с числами. Надо быстро отвечать на кучу вопросов: сумма чисел в подтаблице 
(прямоугольнике), например заданной верхним левым и нижним правым углами - (vx, vy, nx, ny).  
Создадим префиксный массив. Окантовка слева и сверху из нулей. 
Сумма в прямоугольнике (0, 0, i, j) будет 
суммой верхней части этого прямоугольника без нижней строки, левой части без левого столбца, 
минус левой верхней части прямоугольника без нижней строки и левого столбца 
(мы же его прибавили уже дважды).  
pref_lst[i, j] = arr[i, j] + pref_lst[i, j - 1] + pref_lst[i - 1, j] + pref_lst[i - 1, j - 1]  
Сумма на подпрямоугольнике будет: сумма прямоугольника от начала до (vx, vy), 
минус прямоугольники от начала, один из которых слева от нашего прямоугольника, а другой - справа, 
плюс (поскольку дважды эту область отняли) прямоугольник влево-вверх от нашего.  
S(vx, vy, nx, ny) = S(0, 0 , nx, ny) - S(0, 0, nx, vy - 1) - S(0, 0, vx - 1, ny) + S(0, 0 , vx - 1, vy - 1) 
= pref_lst[nx, ny] - pref_lst[nx, vy - 1] - pref_lst[vx - 1, ny] + pref_lst[vx - 1, vy - 1]

## Разностный массив
Дан массив из чисел. Обработать 100500 запросов типа: к элементам со 2-го по 10-й прибавить 42.  
Создаем разностный массив: a[i] = a[i] - a[i - 1]. a[0] = a[0]. Бежать надо с конца?  
Для разностного массива исходный - префиксный.
Во 2-ую ячейку добавляем +42, в (10 + 1)-ю - -42.  
В конце останется посчитать по b массив префиксных сумм.  
А можно изначально начать с нулевого массива для разностей, добавить всё, посчитать массив префиксных сумм и 
прибавить его к исходному массиву? Но это лишняя память.  

### Разностный массив 2d
Дана таблица с числами. Обработать 100500 запросов типа: к элементам подпрямоугольника, 
например, заданного верхним левым и нижним правым углами - (vx, vy, nx, ny), прибавить число.  
Создадим "разностный" массив. В каждой строке действуем так, как действовали бы в случае 1d, 
потом в каждом столбце (можно и в противоположном порядке). 
Или в явном виде (бежать надо с правого нижнего угла?): 
arr[i, j] = arr[i, j] - arr[i, j - 1] - arr[i - 1, j] + arr[i - 1, j - 1]   
Когда говорят прибавить число в каком-то подпрямоугольнике (vx, vy, nx, ny), 
прибавляем его в левом верхнем углу (vx, vy), вычитаем правее подпрямоугольника сверху (nx + 1, vy) 
и ниже слева (vx, ny + 1), и еще прибавляем правее и ниже (nx + 1, ny + 1).  
В конце останется посчитать массив префиксных сумм.  
А можно изначально начать с нулевого массива для разностей, добавить всё, посчитать массив префиксных сумм и 
прибавить его к исходному массиву? Но это лишняя память.  

